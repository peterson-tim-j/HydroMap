install.packages(c("sp", "gstat", "raster", "rgenoud", "RSAGA"))
library("gstat", lib.loc="C:/Program Files/R/R-4.0.3/library")
library("sp", lib.loc="C:/Program Files/R/R-4.0.3/library")
library("raster", lib.loc="C:/Program Files/R/R-4.0.3/library")
library("rgenoud", lib.loc="C:/Program Files/R/R-4.0.3/library")
library("parallel", lib.loc="C:/Program Files/R/R-4.0.3/library")
install.packages("devtools")
install.packages("rmarkdown")
install.packages("knitr")
install.packages("xfun")
install.packages("knitr")
install.packages("devtools")
install.packages("processx")
install.packages("htmltools")
install.packages("xfun")
install.packages("callr")
install.packages("bslib")
install.packages("bslib")
install.packages("htmltools")
install.packages(c("ape", "bit", "cachem", "class", "classInt", "cli", "cluster", "colorspace", "commonmark", "curl", "data.table", "DEoptim", "digest", "dplyr", "e1071", "fansi", "farver", "fastmap", "FNN", "foreign", "fs", "gert", "gstat", "haven", "htmltools", "httpuv", "intervals", "isoband", "jsonlite", "KernSmooth", "later", "lattice", "lwgeom", "maps", "maptools", "MASS", "Matrix", "mgcv", "nlme", "nnet", "openssl", "openxlsx", "plyr", "processx", "profvis", "proxy", "ps", "purrr", "ragg", "raster", "Rcpp", "readr", "readxl", "rgdal", "rlang", "roxygen2", "rpart", "s2", "sass", "sf", "sourcetools", "sp", "spatial", "stringi", "survival", "sys", "terra", "testthat", "tibble", "units", "utf8", "vctrs", "viridisLite", "vroom", "wk", "xfun", "xml2", "xts", "yaml", "zip", "zoo"))
install.packages("htmltools")
install.packages("devtools")
install.packages("callr")
install.packages("callr")
install.packages("callr")
install.packages("callr")
install.packages("devtools")
library(HydroMap)
set.env()
# Load water table observations from  April 2000 for Victoria, Australia and a 250m state-wide DEM.
data('victoria.groundwater')
# Load a model variogram and mapping parametyers found to be effective.
data('mapping.parameters')
# Define a simple kriging formula without MrVBF terms that does not require the package RSAGA.
f <- as.formula('head ~ elev + smoothing')
# Crop this Statewide DEM abd obs pointvs to a small in the centre.
# Note, this is done to reduce the runtime. Comment out these two lines to map the whole state.
DEM <- raster::crop(raster::raster(DEM), raster::extent(2400000, 2500000, 2550000, 2650000))
DEM = as(DEM,'SpatialGridDataFrame')
obs.data <- raster::crop(obs.data, DEM, inverse = F)
variogram.model = vgm(psill=10, model='Mat', range= 10000 , nugget=1, kappa=0.1);
o
obs.data$total_err_var = pmax(obs.data$total_err_var, 0.05)
library(HydroMap)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
library(sp)
library(grid)
library(gstat)
library(raster)
library(RSAGA)
library(parallel)
library(rgenoud)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
variogram.model = vgm(psill=10, model='Mat', range= 10000 , nugget=1, kappa=0.1);
obs.data$total_err_var = pmax(obs.data$total_err_var, 0.05)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
library(HydroMap)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
splitData[[1]]
nrow(splitData[[1]])
splitData[[1]]$elev
est <- do.call("rbind", parLapplyLB(cl, splitData, function(lst)
krige.head.crossval(
newdata=lst,
formula=formula,
model=model,
model.landtype=model.landtype,
model.landtype.head=model.landtype.head,
model.fixedHead=model.fixedHead,
model.fixedHead.head=model.fixedHead.head,
nmin=nmin,
nmax=nmax,
nmax.fixedHead=nmax.fixedHead,
nmin.fixedHead=nmin.fixedHead,
omax.fixedHead=omax.fixedHead,
maxdist=maxdist,
omax=omax,
do.depth.est=do.depth.est,
use.MrVBF=use.MrVBF,
use.MrRTF=use.MrRTF,
use.DEMsmoothing=use.DEMsmoothing,
use.LandCatagory=use.LandCatagory,
use.FixedHeads=use.FixedHeads,
data=data,
data.fixedHead=data.fixedHead,
data.weights=data.weights,
smooth.std=smooth.std,
grid.elev=grid.elev,
grid.MrVBF=grid.MrVBF,
grid.MrRTF=grid.MrRTF,
grid.LandType=grid.LandType,
grid.params=grid.params,
debug.level=debug.level)
))
nclus
ceil(2.2)
ceiling(2.2)
library(HydroMap)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=1, use.cluster = T)
est
library(HydroMap)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = T)
splitData[[i]])
splitData[[i]]
nrow(splitData[[i]])
j=1
j++
library(HydroMap)
library(HydroMap)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = T)
splitData[[i]]
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = T)
ind.isempty
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 10)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = F)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2)
library(HydroMap)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2,pop.size.multiplier=5)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2,pop.size.multiplier=5)
calib.results <- krige.head.calib(formula=f, grid=DEM, data=obs.data, newdata=0.25, nmin=0, nmax=Inf, maxdist=Inf, omax=0,
data.errvar.colname='total_err_var', model = variogram.model,  fit.variogram.type=1,
debug.level=0, use.cluster = 2,pop.size.multiplier=5)
calib.results$lookup.table
calib.results$param.Names
calib.results$param.Names
library(HydroMap)
library(HydroMap)
library(HydroMap)
devtools::document()
library(HydroMap)
